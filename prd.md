# 📄 PRD: YouTube 채널 분석 서비스 (Ruby on Rails + PostgreSQL 기반)

## 1. 🧭 개요

**프로젝트명**: Youlytic (가칭)

**목표**: 사용자가 유튜브 채널 주소 또는 ID를 입력하면 해당 채널의 주요 데이터를 수집 및 분석하여 시각화 리포트를 제공하는 웹 기반 서비스

**사용 기술**: Ruby on Rails 7.x, PostgreSQL, YouTube Data API v3, Redis, Sidekiq

**사용자 대상**: 콘텐츠 크리에이터, 브랜드 마케터, 광고 대행사, 투자자 및 경쟁사 분석 목적의 일반 사용자

## 2. 🎯 핵심 기능 목록

### 2.1 채널 정보 분석
- **입력값**: 유튜브 채널 URL 또는 채널 ID
- **출력값**:
  - 채널명, 설명, 프로필 썸네일
  - 채널 생성일, 국가/언어 정보
  - 구독자 수, 총 조회수, 총 영상 수
  - 채널 키워드 및 태그 (가능 시)
  - 브랜딩 정보 (배너 이미지 등)

### 2.2 영상 콘텐츠 분석
- **최신 영상 분석**: 최근 업로드된 영상 50-100개 분석
- **각 영상 정보**:
  - 제목, 썸네일, 업로드 일자
  - 조회수, 좋아요/싫어요 수, 댓글 수
  - 영상 길이, 카테고리
  - 태그 및 설명 (가능 시)
- **인기 영상**: 조회수/참여도 기준 상위 20개
- **영상 트렌드**: 업로드 주기, 콘텐츠 패턴 분석

### 2.3 통계 시각화 및 인사이트
- **성과 지표**:
  - 평균 조회수, 중간값, 최고/최저 조회수
  - 평균 좋아요 비율, 댓글 참여율
  - 영상별 성과 분포 (히스토그램)
- **시간별 분석**:
  - 업로드 빈도 (주간/월간 패턴)
  - 평균 영상 길이 추이
  - 성과 변화 트렌드
- **비교 분석**:
  - 장르별 평균 대비 성과
  - 유사 채널 대비 포지션

### 2.4 수익 추정 모델
- **다층 CPM 모델**:
  - 기본 CPM: $0.5 ~ $5 (지역/카테고리별)
  - 채널 규모별 가중치 적용
  - 참여도 기반 보정 계수
- **수익 추정**:
  - 영상별 예상 수익 (범위)
  - 월간 수익 추정
  - 연간 수익 프로젝션
- **수익성 지표**:
  - RPM (Revenue per Mille)
  - 평균 수익 대비 성과

### 2.5 데이터 내보내기 및 공유
- **리포트 생성**: PDF, PNG 형태로 저장
- **데이터 내보내기**: CSV, JSON 형태
- **공유 기능**: 
  - 퍼머링크 생성 (24-48시간 유효)
  - 요약 버전 SNS 공유
- **비교 리포트**: 여러 채널 비교 분석

### 2.6 사용자 관리 및 프리미엄 기능
- **기본 기능** (비회원):
  - 일 3회 분석 제한
  - 기본 리포트만 제공
- **회원 기능**:
  - 분석 히스토리 저장
  - 즐겨찾기 채널 관리
  - 상세 리포트 접근
- **프리미엄 기능**:
  - 무제한 분석
  - 심화 분석 (경쟁사 비교, 트렌드 예측)
  - API 접근
  - 화이트라벨 리포트

## 3. 🏗️ 시스템 아키텍처

### 3.1 프론트엔드
- **프레임워크**: Rails Views + Turbo + Stimulus
- **스타일링**: TailwindCSS + DaisyUI
- **차트**: Chart.js + Chartkick
- **상태 관리**: Turbo Streams for real-time updates

### 3.2 백엔드
- **프레임워크**: Ruby on Rails 7.x
- **API**: YouTube Data API v3
- **백그라운드 작업**: Sidekiq + Redis
- **캐싱**: Redis + Rails fragment caching
- **파일 저장**: Active Storage + S3 (production)

### 3.3 데이터베이스 설계 (PostgreSQL)

#### 핵심 테이블

| 테이블명 | 주요 컬럼 | 설명 |
|----------|-----------|------|
| `channels` | youtube_id, title, description, stats, metadata | 채널 기본 정보 |
| `videos` | youtube_id, channel_id, title, stats, metadata | 영상 정보 |
| `channel_snapshots` | channel_id, snapshot_date, stats | 채널 통계 스냅샷 |
| `analysis_reports` | user_id, channel_id, report_data, status | 분석 리포트 |
| `users` | email, subscription_tier, api_quota | 사용자 정보 |

### 3.4 API 설계
- **RESTful API**: `/api/v1/` 엔드포인트
- **Rate Limiting**: Redis 기반 요청 제한
- **Authentication**: JWT 토큰 또는 API 키

## 4. 🔐 YouTube API 연동 전략

### 4.1 API 엔드포인트 매핑
| YouTube API | 용도 | 쿼리 최적화 |
|-------------|------|-------------|
| `channels.list` | 채널 정보 | part=snippet,statistics,brandingSettings |
| `search.list` | 채널 영상 검색 | channelId, order=date, maxResults=50 |
| `videos.list` | 영상 상세 정보 | part=snippet,statistics,contentDetails |
| `videoCategories.list` | 카테고리 정보 | 캐시 후 재사용 |

### 4.2 API 최적화 전략
- **배치 처리**: 한 번에 최대 50개 영상 정보 조회
- **캐싱 전략**: 
  - 채널 정보: 6시간 캐시
  - 영상 통계: 1시간 캐시
  - 정적 데이터: 24시간 캐시
- **Quota 관리**: 일일 할당량 모니터링 및 조절

## 5. 📐 주요 화면 구성

### 5.1 메인 화면
- **Hero Section**: 서비스 소개 및 입력 폼
- **입력 옵션**: URL 입력 또는 채널명 검색
- **샘플 분석**: 인기 채널 분석 결과 미리보기
- **최근 분석**: 실시간 분석 현황

### 5.2 분석 진행 화면
- **진행률 표시**: 실시간 분석 상태
- **단계별 피드백**: 
  - 채널 정보 수집
  - 영상 데이터 분석
  - 통계 계산
  - 리포트 생성

### 5.3 분석 결과 화면
#### 상단 요약 섹션
- 채널 기본 정보 카드
- 핵심 지표 대시보드
- 수익 추정 하이라이트

#### 상세 분석 섹션
- **성과 분석**: 조회수, 참여도 차트
- **콘텐츠 분석**: 영상 길이, 업로드 패턴
- **인기 영상**: 상위 영상 리스트
- **수익 분석**: 상세 수익 모델

### 5.4 사용자 대시보드
- **분석 히스토리**: 과거 분석 결과 관리
- **즐겨찾기**: 관심 채널 모니터링
- **비교 분석**: 채널 간 성과 비교
- **계정 설정**: 구독 및 알림 관리

## 6. 🔧 기술적 고려사항

### 6.1 성능 최적화
- **데이터베이스**: 인덱스 최적화, 쿼리 최적화
- **캐싱**: Multi-layer 캐싱 전략
- **비동기 처리**: 백그라운드 job으로 무거운 작업 처리
- **CDN**: 정적 자원 및 이미지 최적화

### 6.2 확장성 고려
- **수평 확장**: Load balancer 및 다중 서버 지원
- **데이터 파티셔닝**: 채널별 데이터 분산
- **API 버전 관리**: 하위 호환성 보장

### 6.3 보안 및 규정 준수
- **데이터 보호**: GDPR, 개인정보보호법 준수
- **API 보안**: Rate limiting, CORS 설정
- **사용자 인증**: 강력한 패스워드 정책
- **YouTube ToS**: 이용약관 준수

## 7. 🚀 개발 로드맵

### Phase 1: MVP (4-6주)
- 기본 채널 분석 기능
- 간단한 통계 시각화
- 기본 UI/UX

### Phase 2: Enhanced Features (6-8주)
- 사용자 인증 시스템
- 고급 분석 기능
- PDF 리포트 생성

### Phase 3: Premium Features (8-10주)
- 결제 시스템 연동
- API 제공
- 고급 비교 분석

### Phase 4: Scale & Optimize (지속)
- 성능 최적화
- 추가 플랫폼 지원
- AI 기반 인사이트

## 8. 🎯 성공 지표 (KPI)

### 사용자 지표
- **DAU/MAU**: 일/월 활성 사용자
- **분석 완료율**: 시작 대비 완료된 분석 비율
- **재방문율**: 7일/30일 내 재방문
- **사용자 만족도**: NPS 점수

### 비즈니스 지표
- **전환율**: 무료 → 유료 전환
- **ARPU**: 사용자당 평균 수익
- **Churn Rate**: 이탈률
- **LTV**: 고객 생애 가치

### 기술 지표
- **응답 시간**: API 응답 시간
- **시스템 가용성**: Uptime
- **에러율**: 시스템 에러 발생률
- **API Quota 효율성**: YouTube API 사용량 최적화

---

## 부록: 참고 자료

- YouTube Data API v3 문서
- Rails 7 가이드
- PostgreSQL 성능 튜닝 가이드
- Chart.js 문서
- Sidekiq 베스트 프랙티스